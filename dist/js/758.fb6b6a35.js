"use strict";(self["webpackChunkonline_suppermarket"]=self["webpackChunkonline_suppermarket"]||[]).push([[758],{6758:function(t,e,a){a.r(e),a.d(e,{default:function(){return N}});var i=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"bgimg",staticStyle:{height:"100%"}},[e("el-header",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","background-color":"#4f7dbd52"}},[e("i",{staticClass:"el-icon-shopping-cart-2",staticStyle:{"font-size":"4.5rem",color:"#222","margin-right":"22%"}}),e("span",{staticStyle:{"font-size":"50px","font-family":"'Courier New', Courier, monospace","margin-right":"22%"}},[t._v("在 线 商 城")]),e("el-popover",{attrs:{placement:"top",width:"160"},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[e("p",{staticStyle:{"text-align":"center"}},[t._v("确定退出登录？")]),e("div",{staticStyle:{"text-align":"center",margin:"0"}},[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){t.popoverVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("确 定")])],1),e("el-button",{staticStyle:{"background-color":"azure"},attrs:{slot:"reference",icon:"el-icon-user"},slot:"reference"},[e("span",{domProps:{textContent:t._s(t.userName)}})])],1),e("el-dialog",{staticStyle:{left:"25%",top:"10%","text-align":"center",width:"800px"},attrs:{title:"登 录",visible:t.dialogFormVisible,"show-close":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",[e("el-form-item",{attrs:{label:"账 号","label-width":"50px"}},[e("el-input",{staticStyle:{width:"300px","text-align-last":"center"},attrs:{autocomplete:"off"},model:{value:t.signIn.account,callback:function(e){t.$set(t.signIn,"account",e)},expression:"signIn.account"}})],1),e("el-form-item",{attrs:{label:"密 码","label-width":"50px"}},[e("el-input",{staticStyle:{width:"300px","text-align-last":"center"},attrs:{autocomplete:"off","show-password":""},model:{value:t.signIn.password,callback:function(e){t.$set(t.signIn,"password",e)},expression:"signIn.password"}})],1),e("el-select",{staticStyle:{"text-align-last":"center"},attrs:{placeholder:"选择身份"},model:{value:t.signIn.role,callback:function(e){t.$set(t.signIn,"role",e)},expression:"signIn.role"}},[e("el-option",{attrs:{label:"商 家",value:"merchant"}},[t._v(" 商 家 ")]),e("el-option",{attrs:{label:"顾 客",value:"guest"}},[t._v(" 顾 客 ")])],1)],1),e("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!1,t.submitRegistry()}}},[t._v("确 定")]),e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"warning"},on:{click:function(e){t.dialogFormVisible=!1,t.deleteRegistry()}}},[t._v("注 销")])],1)],1),e("i",{staticClass:"el-icon-shopping-bag-2",staticStyle:{"margin-left":"2%"}})],1),e("el-container",[e("el-aside",{staticStyle:{"background-color":"#4f7dbd52",height:"97.5%"},attrs:{width:"230px"}},[e("el-menu",{staticStyle:{"background-color":"#4f7dbd52"},attrs:{"default-openeds":["1"]}},[e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-message"}),t._v("我的空间")]),e("el-menu-item-group",{staticStyle:{"background-color":"#4f7dbd79"}},[e("el-menu-item",{attrs:{index:"1-1"},on:{click:function(e){t.orderStatusDialog=!0,t.orderStatusDetail()}}},[t._v(" 订单状态 ")]),e("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"订单状态",visible:t.orderStatusDialog},on:{"update:visible":function(e){t.orderStatusDialog=e}}},[e("el-table",{attrs:{data:t.orderStatus}},[e("el-table-column",{attrs:{property:"date",label:"日期"}}),e("el-table-column",{attrs:{property:"pname",label:"商品名"}}),e("el-table-column",{attrs:{property:"orderID",label:"订单号"}}),e("el-table-column",{attrs:{property:"address",label:"发货地址"}}),e("el-table-column",{attrs:{property:"price",label:"金额￥"}}),e("el-table-column",{attrs:{property:"count",label:"数量"}}),e("el-table-column",{attrs:{property:"time",label:"预计送达时间"}}),e("el-table-column",{attrs:{property:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(1==e.row.status?"已完成":"未完成")+" ")]}}])}),e("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a.$index,t.orderStatus)}}},[t._v(" 移除 ")])]}}])})],1)],1),e("el-menu-item",{attrs:{index:"1-2"},on:{click:function(e){t.shopTrolleyDialog=!0,t.shopTrolleyDetail()}}},[t._v(" 购物车 ")]),e("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"购物车",visible:t.shopTrolleyDialog},on:{"update:visible":function(e){t.shopTrolleyDialog=e}}},[e("el-table",{attrs:{data:t.shopTrolley}},[e("el-table-column",{attrs:{property:"name",label:"商品名"}}),e("el-table-column",{attrs:{property:"price",label:"价格￥"}}),e("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.deleteRow(a.$index,t.shopTrolley)}}},[t._v(" 移除 ")]),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.queryBuy=!0,t.buyindex=a.$index}}},[t._v(" 购买 ")]),e("el-dialog",{attrs:{visible:t.queryBuy,width:"40%","append-to-body":!0},on:{"update:visible":function(e){t.queryBuy=e}}},[e("h2",{staticStyle:{"text-align":"center","margin-top":"0%"},domProps:{textContent:t._s(t.step)}}),e("el-steps",{attrs:{active:t.active,"finish-status":"success"}},[e("el-step",{attrs:{title:"确认"}}),e("el-step",{attrs:{title:"付款"}}),e("el-step",{attrs:{title:"交易成功"}})],1),e("div",{staticStyle:{position:"relative","text-align":"center"}},[e("div",[e("br"),"selectPage"==t.currentComponent?e("select-nums",{ref:"forNums",staticStyle:{position:"absolute",left:"50%",top:"30%",transform:"translate(-50%, -50%)"}}):"paymentPage"==t.currentComponent?e("payment-page",{ref:"forAmount",staticStyle:{position:"absolute",left:"50%",top:"30%",transform:"translate(-50%, -50%)"}}):"paymentSuccess"==t.currentComponent?e("payment-success",{staticStyle:{position:"absolute",left:"50%",top:"30%",transform:"translate(-50%, -50%)"}}):t._e(),e("br")],1),e("br"),e("br"),e("br"),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.buy(t.buyindex),t.next()}}},[t._v(" 确定 ")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.queryBuy=!1,t.currentComponent="selectPage",t.active=0}}},[t._v("取消")])],1)],1)]}}])})],1)],1)],1)],2)],1)],1),e("el-container",[e("el-main",{staticStyle:{height:"100%",width:"100%"}},[e("div",{staticStyle:{"margin-top":"15px","text-align":"center"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请输入内容"},model:{value:t.queryCommodityContent,callback:function(e){t.queryCommodityContent=e},expression:"queryCommodityContent"}},[e("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.selectCondition,callback:function(e){t.selectCondition=e},expression:"selectCondition"}},[e("el-option",{attrs:{label:"发货地址",value:"address"}}),e("el-option",{attrs:{label:"商品名",value:"pname"}})],1),e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.queryCommodity},slot:"append"})],1)],1),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticStyle:{overflow:"auto",display:"flex","flex-wrap":"wrap",height:"calc(100vh - 190px)","text-align":"center","margin-top":"30px"},attrs:{"infinite-scroll-distance":"1"}},t._l(t.commodityList,(function(a,i){return e("div",{key:i,staticStyle:{height:"300px",flex:"0 0 48%"}},[e("img",{staticStyle:{height:"200px",width:"200px"},attrs:{src:a.picture}}),t._v(" "),e("br"),e("span",[t._v(t._s(a.name))]),e("br"),e("span",[t._v("￥"+t._s(a.price))]),e("br"),e("el-button",{attrs:{icon:"el-icon-search",circle:""},on:{click:function(e){t.forDetail=!0,t.putDetail(i)}}}),e("el-dialog",{staticStyle:{"text-align":"center"},attrs:{title:"商品详情",visible:t.forDetail,width:"30%",top:"8vh"},on:{"update:visible":function(e){t.forDetail=e}}},[e("img",{staticStyle:{height:"400px",width:"400px"},attrs:{src:t.detailImg}}),t._v(" "),e("br"),e("br"),e("span",{domProps:{textContent:t._s(t.detailName)}}),e("br"),e("br"),e("span",{domProps:{textContent:t._s(t.detailPrice)}}),e("br"),e("br"),t._v(" 发货地址:  "),e("span",{domProps:{textContent:t._s(t.detailAddr)}}),e("br"),e("br"),e("span",{domProps:{textContent:t._s(t.detailTime)}}),e("br"),e("br"),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.forDetail=!1}}},[t._v("确 定")])],1),e("el-button",{attrs:{type:"warning",icon:"el-icon-star-off",circle:""},on:{click:function(e){t.addin=!0,t.addindex=i}}}),e("el-dialog",{attrs:{title:"确定放入购物车？",visible:t.addin,width:"30%"},on:{"update:visible":function(e){t.addin=e}}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addin=!1,t.addInTrolley(t.addindex)}}},[t._v("确 定")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addin=!1}}},[t._v("取 消")])],1)],1)})),0)]),e("el-footer",{staticStyle:{height:"25px"}})],1)],1)],1)},l=[],o=function(){var t=this,e=t._self._c;return e("el-container",[e("div",[e("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("微信支付")]),e("el-radio",{attrs:{label:"2"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("支付宝")]),e("el-radio",{attrs:{label:"3"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("银联")]),e("br"),e("br"),t._v("总金额: ￥"+t._s(t.amount)+" ")],1)])},n=[],s={data(){return{radio:"",amount:""}},methods:{changeData(t){this.amount=t}}},r=s,c=a(1656),u=(0,c.A)(r,o,n,!1,null,null,null),d=u.exports,p=function(){var t=this,e=t._self._c;return e("el-container",{staticStyle:{"text-align":"center"}},[e("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:""}}),e("br"),t._v("  支付成功 ")],1)},m=[],h={},y=h,b=(0,c.A)(y,p,m,!1,null,null,null),g=b.exports,f=function(){var t=this,e=t._self._c;return e("el-input-number",{attrs:{min:1,max:1e3,label:"数量"},model:{value:t.nums,callback:function(e){t.nums=e},expression:"nums"}})},v=[],x={data(){return{nums:1}},methods:{getData(){return this.nums}}},S=x,_=(0,c.A)(S,f,v,!1,null,null,null),k=_.exports,C=a(4373);C.A.defaults.baseURL="http://113.44.84.103:8080";var w={data(){return{userName:"",dialogFormVisible:!1,popoverVisible:!1,signIn:{account:"",password:"",role:""},orderStatusDialog:!1,shopTrolleyDialog:!1,commodityList:[],page:0,detailImg:"",detailName:"",detailPrice:"",detailAddr:"",detailTime:"",forDetail:!1,addin:!1,queryBuy:!1,shopTrolley:[],orderStatus:[],active:0,currentComponent:"selectPage",step:"请选择数量",queryCommodityContent:"",selectCondition:"",addindex:"",buyindex:"",isSearchResult:0}},components:{PaymentPage:d,PaymentSuccess:g,SelectNums:k},methods:{load(){this.isSearchResult||(this.page=this.page+1,C.A.post("http://113.44.84.103:8080/guestView",{page:this.page}).then((t=>{this.commodityList=this.commodityList.concat(t.data.data)})))},submitRegistry:function(){C.A.post("http://113.44.84.103:8080/changeAccount",this.signIn).then((t=>{1==t.data.status?this.userName=t.data.userName:alert("该用户不存在"),"merchant"==this.signIn.role&&1==t.data.status&&location.replace("http://113.44.84.103:7000/#/merchant")}))},putDetail(t){this.detailImg=this.commodityList[t].picture,this.detailName=this.commodityList[t].name,this.detailPrice="￥"+this.commodityList[t].price,this.detailAddr=this.commodityList[t].delivAddr,this.detailTime=this.commodityList[t].delivTime,C.A.get("http://113.44.84.103:8080/guestBrows",{params:{pname:this.detailName}})},addInTrolley(t){C.A.get("http://113.44.84.103:8080/addInTrolley",{params:{name:this.commodityList[t].name}}).then((t=>{"failed"==t.data.code?alert("已在购物车中！"):alert("加入购物车成功！")})),C.A.get("http://113.44.84.103:8080/guestBrows",{params:{pname:this.commodityList[t].name}})},shopTrolleyDetail(){C.A.get("http://113.44.84.103:8080/shopTrolleyDetail",{params:{userName:this.userName}}).then((t=>{this.shopTrolley=t.data.data}))},orderStatusDetail(){C.A.get("http://113.44.84.103:8080/guestOrderStatus",{params:{userName:this.userName}}).then((t=>this.orderStatus=t.data.data))},buy(t){if(0!=this.active)return;const e=this.$refs.forNums.getData();C.A.post("http://113.44.84.103:8080/buy",{name:this.shopTrolley[t].name,nums:e}).then((t=>this.$refs.forAmount.changeData(t.data.amount)))},deleteRow(t,e){C.A.get("http://113.44.84.103:8080/deleteFromTrolley",{params:{name:e[t].name}}),e.splice(t,1)},next(){2==this.active++&&(this.queryBuy=!1,this.active=0,alert("交易成功！"),this.currentComponent="selectPage"),1==this.active&&(this.currentComponent="paymentPage",this.step="请选择付款方式"),2==this.active&&(this.currentComponent="paymentSuccess",this.step="交易成功")},queryCommodity(){"pname"==this.selectCondition&&C.A.post("http://113.44.84.103:8080/getCommodity",{pname:this.queryCommodityContent}).then((t=>{this.commodityList=t.data.data})),"address"==this.selectCondition&&C.A.post("http://113.44.84.103:8080/getCommodity",{address:this.queryCommodityContent}).then((t=>{this.commodityList=t.data.data})),this.isSearchResult=1},deleteRegistry(){C.A.get("http://113.44.84.103:8080/deleteUser",{params:{userName:this.userName}}).then((()=>{alert("注销成功！"),location.replace("http://113.44.84.103:7000/#/")}))}},mounted(){C.A.get("http://113.44.84.103:8080/username").then((t=>this.userName=t.data.userName)),this.isSearchResult=0}},D=w,A=(0,c.A)(D,i,l,!1,null,null,null),N=A.exports}}]);
//# sourceMappingURL=758.fb6b6a35.js.map